# CLAUDE.md

**claude-code_playgroundで作業するAIアシスタントのためのドキュメント**

最終更新: 2026-01-24

---

## リポジトリ概要

**リポジトリ:** yuyutyanu/claude-code_playground
**目的:** 開発実験用のプレイグラウンド・サンドボックス
**現在の状態:** 初期段階 / 最小限のセットアップ
**主な目標:** 柔軟な開発実験を可能にする（モバイルフレンドリーなワークフローを含む）

これは実験的な開発作業のために設計されたサンドボックスリポジトリです。リポジトリ名とREADMEは、便利でアクセスしやすい開発ワークフローに焦点を当てています。

---

## 現在のリポジトリ構造

```
claude-code_playground/
├── .git/                 # Gitリポジトリデータ
├── README.md            # プロジェクト紹介（日本語）
└── CLAUDE.md           # このファイル - AIアシスタント用ドキュメント
```

### 主要ファイル

- **README.md**: 日本語でのプロジェクト概要（「寝ながらスマホぽちぽちで開発したい所存」）
- **CLAUDE.md**: AIアシスタント向けのこのドキュメント

---

## 開発ワークフロー

### Gitブランチ戦略

**ブランチ命名規則:**
- すべてのフィーチャーブランチは `claude/<説明>-<セッションID>` パターンに従う必要があります
- 例: `claude/add-feature-abc123`
- 現在の作業ブランチ: `claude/add-claude-documentation-m0esa`

**重要なGitルール:**
1. 必ず指定されたフィーチャーブランチで開発する（mainブランチに直接変更しない）
2. ブランチ名は `claude/` で始まり、セッションIDで終わる必要がある
3. 正しくない名前のブランチへのプッシュは403エラーで失敗する

### Gitオペレーションのベストプラクティス

**変更のプッシュ:**
```bash
git push -u origin claude/<branch-name>
```
- 初回プッシュ時は必ず `-u` フラグを使用
- ネットワークエラー時は指数バックオフ（2秒、4秒、8秒、16秒）で最大4回リトライ
- 明示的な許可なしにmain/masterへforce pushしない

**フェッチ/プル:**
```bash
git fetch origin <branch-name>
git pull origin <branch-name>
```
- 特定のブランチをフェッチすることを推奨
- ネットワーク障害時も同じリトライロジックを適用

**コミットメッセージ:**
- 明確で説明的なコミットメッセージを使用
- 「何を」より「なぜ」に焦点を当てる
- 可能な限りConventional Commitフォーマットに従う:
  - `feat:` 新機能
  - `fix:` バグ修正
  - `docs:` ドキュメント
  - `refactor:` リファクタリング
  - `test:` テスト
  - `chore:` メンテナンス

---

## コーディング規約

### 基本原則

初期段階のプレイグラウンドなので、コードベースの成長に合わせて規約を確立していきます:

1. **シンプルさ優先**: 過度な設計を避ける
2. **最小限の抽象化**: 一度きりの操作のために抽象化を作らない
3. **直接的な変更**: 明示的に必要でない限り後方互換性のハックを入れない
4. **クリーンな削除**: 未使用のコードは完全に削除（コメントアウトしない）
5. **セキュリティ意識**: 脆弱性（XSS、SQLインジェクション、コマンドインジェクションなど）に注意

### ファイル構成

プロジェクトの成長に応じて、以下のような構成を検討:
- **タイプ別** (components/, utils/, services/)
- **機能別** (auth/, api/, ui/)
- **ドメイン別** (user/, product/, order/)

プロジェクトのニーズに最も適したパターンを選択してください。

### ドキュメント

- README.mdをプロジェクト概要で最新に保つ
- 複雑なロジックは自明でない場合のみインラインで文書化
- コードベースの成長に合わせてこのCLAUDE.mdを維持
- 外部インターフェースが作成されたらAPIドキュメントを追加

---

## このリポジトリでの作業

### AIアシスタント向け

**変更を加える前に:**
1. ✓ 変更を提案する前に既存ファイルを読む
2. ✓ 現在の構造とパターンを理解する
3. ✓ git statusと現在のブランチを確認
4. ✓ 複数ステップのタスクにはTodoWriteツールを使用

**機能実装時:**
1. シンプルで焦点を絞ったソリューションを保つ
2. 直接要求された変更のみを行う
3. 不必要な機能やリファクタリングを追加しない
4. システム境界（ユーザー入力、外部API）でバリデーション
5. 早期最適化を避ける

**コードレビューチェックリスト:**
- [ ] セキュリティ: インジェクション脆弱性がない
- [ ] シンプルさ: 必要最小限の複雑さ
- [ ] テスト: 意図通りに動作
- [ ] ドキュメント: 複雑なロジックを説明
- [ ] クリーンアップ: 未使用のコードやコメントがない

**タスク管理:**
- 複雑な複数ステップのタスクにはTodoWriteツールを使用
- 開始時にタスクをin_progressにマーク
- 完了したら即座にcompletedにマーク
- 常に1つのタスクのみをin_progressに保つ

### リポジトリの進化

リポジトリの成長に応じて、このドキュメントを以下で更新してください:
- 新しいディレクトリ構造パターン
- 技術スタックの決定
- ビルドとデプロイプロセス
- テスト規約
- コードスタイルガイド
- APIドキュメントへのリンク

---

## 技術スタック

### コアテクノロジー

**フロントエンドフレームワーク:**
- **Next.js** - Reactベースのフルスタックフレームワーク
  - App Router推奨
  - Server ComponentsとClient Componentsの適切な使い分け
  - 詳細: [.claude/skills/nextjs.md](.claude/skills/nextjs.md)

**テスティング:**
- **Vitest** - 高速なユニットテスト・統合テストフレームワーク
  - Viteベースの高速実行
  - Jest互換のAPI
  - 詳細: [.claude/skills/vitest.md](.claude/skills/vitest.md)

**コード品質:**
- **Biome** - 高速なlinterとフォーマッター
  - ESLintとPrettierの代替
  - Rustベースの高速実行
  - 統一されたツールチェーン
  - 詳細: [.claude/skills/biome.md](.claude/skills/biome.md)

### その他のツール

**今後追加予定:**
- 状態管理ライブラリ（必要に応じて）
- UIコンポーネントライブラリ
- データフェッチングライブラリ
- デプロイ先（Vercel、Cloudflare等）

---

## 開発環境

### 前提条件

- **Node.js**: v18以上推奨
- **パッケージマネージャー**: npm、pnpm、またはyarn

### セットアップ

```bash
# リポジトリのクローン
git clone <repository-url>
cd claude-code_playground

# 依存関係のインストール
npm install
# または
pnpm install

# フィーチャーブランチの作成
git checkout -b claude/your-feature-$(date +%s)

# 開発サーバーの起動
npm run dev
```

### 主要なコマンド

```bash
# 開発サーバーの起動
npm run dev

# ビルド
npm run build

# テストの実行
npm run test

# Biomeによるlintとフォーマット
npm run lint
npm run format

# 型チェック
npm run type-check
```

---

## テスト

### テストフレームワーク: Vitest

このプロジェクトではVitestを使用してテストを実行します。

**テスト実行:**
```bash
# すべてのテストを実行
npm run test

# ウォッチモードで実行
npm run test:watch

# カバレッジレポート生成
npm run test:coverage
```

### テスト戦略

**ユニットテスト:**
- ビジネスロジック、ユーティリティ関数
- Reactコンポーネント（React Testing Library使用）
- カスタムフック

**統合テスト:**
- APIルート（Next.js Route Handlers）
- データフェッチング処理
- Server Actions

**E2Eテスト:**
- 重要なユーザーフロー
- （必要に応じてPlaywright等を追加予定）

詳細なテストガイドラインは [.claude/skills/vitest.md](.claude/skills/vitest.md) を参照してください。

---

## 一般的なタスク

### 新機能の追加

1. フィーチャーブランチの作成: `git checkout -b claude/feature-name-<session-id>`
2. 明確なコミットで変更を実装
3. 徹底的にテスト
4. プッシュ: `git push -u origin claude/feature-name-<session-id>`
5. 必要に応じてプルリクエストを作成

### 依存関係の更新

パッケージマネージャーが追加されたら文書化予定。

### プロジェクトの実行

プロジェクト構造が確立したら文書化予定。

---

## トラブルシューティング

### よくある問題

**プッシュ時の403エラー:**
- ブランチ名が `claude/<説明>-<セッションID>` パターンに従っているか確認
- 保護されたブランチにプッシュしていないか確認

**ネットワークエラー:**
- 指数バックオフ（2秒、4秒、8秒、16秒）でリトライ
- 接続とプロキシ設定を確認

---

## AIアシスタントへの注意事項

### リポジトリコンテキスト
- **タイプ:** プレイグラウンド/実験用
- **成熟度:** 初期段階
- **柔軟性:** 高 - 規約を確立中
- **言語コンテキスト:** 日本語開発者（日本語でのコミュニケーションを推奨）

### コミュニケーションスタイル
- 簡潔で直接的に
- 過度な褒め言葉や検証を避ける
- 技術的正確性に焦点を当てる
- 同意よりも客観的なガイダンスを優先

### 特別な考慮事項
1. これはプレイグラウンド - 構造と実験の自由のバランスを取る
2. モバイル開発ワークフローが考慮事項になる可能性
3. 大規模なリファクタリングよりも段階的な改善を優先
4. パターンが出現したら決定を文書化

### 不明な場合
- 推測ではなく明確化を求める
- よりシンプルなソリューションを選ぶ
- 変更を最小限に焦点を絞って保つ
- プロジェクトについて学んだらこのドキュメントを更新

---

## リソース

### 内部ドキュメント
- README.md - プロジェクト概要

### 外部リソース
- Git ドキュメント: https://git-scm.com/doc
- GitHub ガイド: https://guides.github.com

---

## バージョン履歴

- **2026-01-24**: CLAUDE.md初版作成
  - 最小限のリポジトリ構造を文書化
  - Gitワークフロー規約を確立
  - 今後のドキュメント用フレームワークを作成

---

## コントリビューション

このプレイグラウンドリポジトリでは:
1. Gitブランチ規約に従う
2. 変更を焦点を絞ってシンプルに保つ
3. パターンが出現したらドキュメントを更新
4. 完璧なコードより動作するコードを優先

---

**注意:** これは生きたドキュメントです。リポジトリの進化と新しいパターンの出現に応じて更新してください。
